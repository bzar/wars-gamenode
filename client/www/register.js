// Generated by CoffeeScript 1.3.3
(function() {

  require(["gamenode", "base"], function() {
    var client, session;
    client = new GameNodeClient();
    session = new Session(client);
    session.onAuthenticationSuccess = function() {
      return location.replace("mygames.html");
    };
    client.onConnected = function() {
      return session.authenticate();
    };
    return $(document).ready(function() {
      $("#registerForm").submit(function(e) {
        var email, password, password2, username;
        e.preventDefault();
        username = $("#username").val();
        password = $("#password").val();
        password2 = $("#password2").val();
        email = $("#email").val();
        if (password !== password2) {
          alert("Passwords do not match!");
          return;
        }
        return client.stub.register(username, password, email, function(params) {
          if (params.success) {
            return session.authenticate(username, password);
          } else {
            return alert(params.reason);
          }
        });
      });
      return client.connect(WARS_CLIENT_SETTINGS.gameServer);
    });
  });

}).call(this);
